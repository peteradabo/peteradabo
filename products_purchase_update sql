DELIMITER $$

CREATE TRIGGER after_purchase_item_insert
AFTER INSERT ON Purchase_items
FOR EACH ROW
BEGIN
    UPDATE Products
    SET stock = stock + NEW.quantity
    WHERE id = NEW.productid;
END$$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER after_purchase_item_delete
AFTER DELETE ON Purchase_items
FOR EACH ROW
BEGIN
    UPDATE Products
    SET stock = stock - OLD.quantity
    WHERE id = OLD.productid;
END$$

DELIMITER ;
